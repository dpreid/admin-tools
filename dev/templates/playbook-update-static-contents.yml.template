---
- name: update static contents from git handler
  hosts: ${ANSIBLE_GROUP}
  become: yes
  gather_facts: no
  vars_files:
    - ../autogenerated/vars.yml
    
  tasks:
    
   - name: Git checkout static repo
     ansible.builtin.git:
       repo: "{{ static_repo_url }}"
       dest: "/var/www/git/{{ static_repo_name }}"
     
   - name: Create a symbolic links for static sub-directories
     ansible.builtin.file:
       src:  "/var/www/git/{{ static_repo_name }}/{{ item }}"
       dest: "/var/www/{{ domain }}/static/{{ item }}"
       state: link
     loop: "{{ static_sub_dirs }}"

   - name: Create a symbolic link for book app
     ansible.builtin.file:
       src:  "/var/www/git/{{ static_repo_name }}/book"
       dest: "/var/www/{{ domain }}/book"
       state: link
       
   - name: Git checkout dev-static repo
     ansible.builtin.git:
       repo: "{{ dev_static_repo_url }}"
       dest: "/var/www/git/{{ dev_static_repo_name }}"
     
   - name: Create a symbolic links for static sub-directories
     ansible.builtin.file:
       src:  "/var/www/git/{{ dev_static_repo_name }}/{{ item }}"
       dest: "/var/www/{{ domain }}/dev-static/{{ item }}"
       state: link
     loop: "{{ static_sub_dirs }}"



     

  

